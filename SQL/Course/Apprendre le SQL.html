<!DOCTYPE html><html><head>
      <title>Apprendre le SQL</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="file:////home/massinissa/.vscode/extensions/shd101wyy.markdown-preview-enhanced-0.8.11/crossnote/dependencies/katex/katex.min.css">
      
      
      <script type="text/javascript" src="file:////home/massinissa/.vscode/extensions/shd101wyy.markdown-preview-enhanced-0.8.11/crossnote/dependencies/mermaid/mermaid.min.js" charset="UTF-8"></script>
      
      
      <style>
      code[class*=language-],pre[class*=language-]{color:#333;background:0 0;font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.4;-moz-tab-size:8;-o-tab-size:8;tab-size:8;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:.8em;overflow:auto;border-radius:3px;background:#f5f5f5}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal;background:#f5f5f5}.token.blockquote,.token.comment{color:#969896}.token.cdata{color:#183691}.token.doctype,.token.macro.property,.token.punctuation,.token.variable{color:#333}.token.builtin,.token.important,.token.keyword,.token.operator,.token.rule{color:#a71d5d}.token.attr-value,.token.regex,.token.string,.token.url{color:#183691}.token.atrule,.token.boolean,.token.code,.token.command,.token.constant,.token.entity,.token.number,.token.property,.token.symbol{color:#0086b3}.token.prolog,.token.selector,.token.tag{color:#63a35c}.token.attr-name,.token.class,.token.class-name,.token.function,.token.id,.token.namespace,.token.pseudo-class,.token.pseudo-element,.token.url-reference .token.variable{color:#795da3}.token.entity{cursor:help}.token.title,.token.title .token.punctuation{font-weight:700;color:#1d3e81}.token.list{color:#ed6a43}.token.inserted{background-color:#eaffea;color:#55a532}.token.deleted{background-color:#ffecec;color:#bd2c00}.token.bold{font-weight:700}.token.italic{font-style:italic}.language-json .token.property{color:#183691}.language-markup .token.tag .token.punctuation{color:#333}.language-css .token.function,code.language-css{color:#0086b3}.language-yaml .token.atrule{color:#63a35c}code.language-yaml{color:#183691}.language-ruby .token.function{color:#333}.language-markdown .token.url{color:#795da3}.language-makefile .token.symbol{color:#795da3}.language-makefile .token.variable{color:#183691}.language-makefile .token.builtin{color:#0086b3}.language-bash .token.keyword{color:#0086b3}pre[data-line]{position:relative;padding:1em 0 1em 3em}pre[data-line] .line-highlight-wrapper{position:absolute;top:0;left:0;background-color:transparent;display:block;width:100%}pre[data-line] .line-highlight{position:absolute;left:0;right:0;padding:inherit 0;margin-top:1em;background:hsla(24,20%,50%,.08);background:linear-gradient(to right,hsla(24,20%,50%,.1) 70%,hsla(24,20%,50%,0));pointer-events:none;line-height:inherit;white-space:pre}pre[data-line] .line-highlight:before,pre[data-line] .line-highlight[data-end]:after{content:attr(data-start);position:absolute;top:.4em;left:.6em;min-width:1em;padding:0 .5em;background-color:hsla(24,20%,50%,.4);color:#f4f1ef;font:bold 65%/1.5 sans-serif;text-align:center;vertical-align:.3em;border-radius:999px;text-shadow:none;box-shadow:0 1px #fff}pre[data-line] .line-highlight[data-end]:after{content:attr(data-end);top:auto;bottom:.4em}html body{font-family:'Helvetica Neue',Helvetica,'Segoe UI',Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ol,html body>ul{margin-bottom:16px}html body ol,html body ul{padding-left:2em}html body ol.no-list,html body ul.no-list{padding:0;list-style-type:none}html body ol ol,html body ol ul,html body ul ol,html body ul ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;background-color:#f0f0f0;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:700;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::after,html body code::before{letter-spacing:-.2em;content:'\00a0'}html body pre>code{padding:0;margin:0;word-break:normal;white-space:pre;background:0 0;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:after,html body pre code:before,html body pre tt:after,html body pre tt:before{content:normal}html body blockquote,html body dl,html body ol,html body p,html body pre,html body ul{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body code,html body pre{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview ul{list-style:disc}.markdown-preview ul ul{list-style:circle}.markdown-preview ul ul ul{list-style:square}.markdown-preview ol{list-style:decimal}.markdown-preview ol ol,.markdown-preview ul ol{list-style-type:lower-roman}.markdown-preview ol ol ol,.markdown-preview ol ul ol,.markdown-preview ul ol ol,.markdown-preview ul ul ol{list-style-type:lower-alpha}.markdown-preview .newpage,.markdown-preview .pagebreak{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center!important}.markdown-preview:not([data-for=preview]) .code-chunk .code-chunk-btn-group{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .status{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .output-div{margin-bottom:16px}.markdown-preview .md-toc{padding:0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link div,.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}.markdown-preview .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0;min-height:100vh}@media screen and (min-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{font-size:14px!important;padding:1em}}@media print{html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc{padding:0 16px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link div,html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% - 300px);padding:2em calc(50% - 457px - 300px / 2);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */

      </style>
      <!-- The content below will be included at the end of the <head> element. --><script type="text/javascript">
  document.addEventListener("DOMContentLoaded", function () {
    // your code here
  });
</script></head><body for="html-export">
    
    
      <div class="crossnote markdown-preview  ">
      
<h1 id="sql---le-langage-sql">SQL - Le Langage SQL </h1>
<p>Une fois que vous avez accès à un serveur mysql vous devait avoir un invité de commande pour ecrire vos requête SQL similaire à celui ci :</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code>mysql<span class="token operator">&gt;</span>
</code></pre><p>Pour la suite du cours j'ometterai l'ecrirture du prompt <code>mysql&gt;</code>.</p>
<h1 id="un-tour-du-sql">Un tour du SQL </h1>
<p>Ici vous retrouvez un inventaire rapide des requêtes les plus importantes du langage SQL. Il en existe bien d'autres très importantes mais celle représente les bases à avoir pour accèder à vos tables SQL.</p>
<blockquote>
<p>Par convention en SQL les mots en MAJUSCULE sont les mots réservés du langage.</p>
</blockquote>
<p>Pour la suite du tour nous prendrons comme exemple une boutique de vente en ligne de chaussures nommée : <em><a href="http://shoe-shop.com">shoe-shop.com</a></em>.</p>
<h2 id="create-database---créer-un-base-de-donnée">CREATE DATABASE - Créer un base de donnée </h2>
<p><strong>Syntaxe :</strong></p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-CREATE">CREATE</span> <span class="token keyword keyword-DATABASE">DATABASE</span> database_name<span class="token punctuation">;</span>
</code></pre><p><strong>Exemple :</strong></p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-CREATE">CREATE</span> <span class="token keyword keyword-DATABASE">DATABASE</span> shoe_shop<span class="token punctuation">;</span>
</code></pre><p>Cette base de donnée contiendra les tables de l'entiéreté de la boutique en ligne.</p>
<h3 id="lister-les-databases">Lister les databases; </h3>
<p><strong>Syntaxe:</strong></p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SHOW">SHOW</span> <span class="token keyword keyword-DATABASES">DATABASES</span><span class="token punctuation">;</span>
</code></pre><h2 id="use-accèder-à-la-base-de-donnée">USE Accèder à la base de donnée </h2>
<p><code>USE</code> permet d'accéder à une base de donnée pour ensuite y créer,modifier ou supprimer des tables.</p>
<h4 id="cette-requête-est-obligatoire-pour-le-fonctionnement-des-requêtes-suivantes-"><strong>Cette requête est obligatoire pour le fonctionnement des requêtes suivantes !</strong> </h4>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-USE">USE</span> shoe_shop<span class="token punctuation">;</span>
</code></pre><h2 id="create-table---créer-une-table-de-donnée">CREATE TABLE - Créer une table de donnée </h2>
<p>Une table de donnée est défini par des colonnes et chaque colonne est défini par un nom et un type de donnée SQL.<br>
Plus d'infos sur les types de données SQL ici : <a href="https://dev.mysql.com/doc/refman/8.0/en/data-types.html">https://dev.mysql.com/doc/refman/8.0/en/data-types.html</a>.</p>
<p>Egalement <strong>un résumé des types de données les plus commun</strong> ici : <a href="https://www.w3schools.com/sql/sql_datatypes.asp">https://www.w3schools.com/sql/sql_datatypes.asp</a></p>
<p><strong>Syntaxe :</strong></p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-CREATE">CREATE</span> <span class="token keyword keyword-TABLE">TABLE</span> table_name <span class="token punctuation">(</span>
    column_name1 datatype<span class="token punctuation">,</span>
    column_name2 datatype<span class="token punctuation">,</span>
    column_name3 datatype<span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p><strong>Exemple :</strong></p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-CREATE">CREATE</span> <span class="token keyword keyword-TABLE">TABLE</span> category<span class="token punctuation">(</span>
    id <span class="token keyword keyword-INT">INT</span> <span class="token keyword keyword-PRIMARY">PRIMARY</span> <span class="token keyword keyword-KEY">KEY</span> <span class="token keyword keyword-AUTO_INCREMENT">AUTO_INCREMENT</span><span class="token punctuation">,</span>
    name <span class="token keyword keyword-TINYTEXT">TINYTEXT</span><span class="token punctuation">,</span>
    description <span class="token keyword keyword-TEXT">TEXT</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><blockquote>
<p><code>INT</code> signifie integer soit un nombre entier c'est le type de la colonne <code>id</code>.</p>
</blockquote>
<blockquote>
<p><code>PRIMARY KEY AUTO_INCREMENT</code> défini la colonne id comme etant l'identifiant des catégorie, chaque categorie possède un identifiant numérique unique. La majorité des tables SQL force leurs elements à avoir un identifiant unique. Celà simplifie l'accès au element et permet la mise en relation de table.</p>
</blockquote>
<p><strong>Résultat :</strong></p>
<div class="mermaid">erDiagram
category{
    id INT
    name TINYTEXT
    description TEXT
}
</div><h3 id="clé-primaire-et-clé-étrangère">Clé primaire et clé étrangère </h3>
<p>Les élement d'une table SQL sont identifiés par leurs clé primaire cette clé est un INT défini grâce à la commande <code>PRIMARY KEY</code>.<br>
Une clé primaire peut être réferencé dans la colonnes d'une autre table si les deux tables sont liés, on appel celà une clé étrangère.</p>
<p><strong>Création de la table produits :</strong></p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-CREATE">CREATE</span> <span class="token keyword keyword-TABLE">TABLE</span> product<span class="token punctuation">(</span>
    id <span class="token keyword keyword-INT">INT</span> <span class="token keyword keyword-PRIMARY">PRIMARY</span> <span class="token keyword keyword-KEY">KEY</span> <span class="token keyword keyword-AUTO_INCREMENT">AUTO_INCREMENT</span><span class="token punctuation">,</span>
    name <span class="token keyword keyword-TINYTEXT">TINYTEXT</span><span class="token punctuation">,</span>
    description <span class="token keyword keyword-TEXT">TEXT</span><span class="token punctuation">,</span>
    price <span class="token keyword keyword-FLOAT">FLOAT</span><span class="token punctuation">,</span>
    categoryId <span class="token keyword keyword-INT">INT</span><span class="token punctuation">,</span>
    <span class="token keyword keyword-FOREIGN">FOREIGN</span> <span class="token keyword keyword-KEY">KEY</span> <span class="token punctuation">(</span>categoryId<span class="token punctuation">)</span> <span class="token keyword keyword-REFERENCES">REFERENCES</span> category<span class="token punctuation">(</span>id<span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p><strong>Ajout d'un élement:</strong></p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword keyword-SELECT">SELECT</span> id<span class="token punctuation">,</span>name <span class="token keyword keyword-from">from</span> category<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----+----------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> name     <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+----------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> sneakers <span class="token operator">|</span> <span class="token comment"># La catégorie "sneakers" a pour clé primaire 1</span>
<span class="token operator">+</span><span class="token comment">----+----------+</span>
<span class="token number">1</span> <span class="token keyword keyword-row">row</span> <span class="token operator">in</span> <span class="token keyword keyword-set">set</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">00</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword keyword-INSERT">INSERT</span> <span class="token keyword keyword-INTO">INTO</span> product <span class="token punctuation">(</span>name<span class="token punctuation">,</span>description<span class="token punctuation">,</span>price<span class="token punctuation">,</span>categoryId<span class="token punctuation">)</span> <span class="token keyword keyword-VALUES">VALUES</span><span class="token punctuation">(</span>
    <span class="token string">"Adidas stansmith 42"</span><span class="token punctuation">,</span>
    <span class="token string">"Blabla"</span><span class="token punctuation">,</span>
    <span class="token number">99.99</span><span class="token punctuation">,</span>
    <span class="token number">1</span>       <span class="token comment"># Je fournis 1 en temps que clé étrangère</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
Query OK<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword keyword-row">row</span> affected <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">02</span> sec<span class="token punctuation">)</span>
</code></pre><blockquote>
<p>Si j'avais écrit 5 en tant que clé étrangère alors qu'aucune categorie n'a 5 comme id, SQL m'aurait renvoyé une erreur.</p>
</blockquote>
<h2 id="describe-connaitre-la-structure-dune-table">DESCRIBE, connaitre la structure d'une table </h2>
<p><strong>Syntaxe :</strong></p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-DESCRIBE">DESCRIBE</span> table_name<span class="token punctuation">;</span>
</code></pre><p><strong>Exemple :</strong></p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-DESCRIBE">DESCRIBE</span> category<span class="token punctuation">;</span>
</code></pre><h2 id="insert-into">INSERT INTO </h2>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-INSERT">INSERT</span> <span class="token keyword keyword-INTO">INTO</span> category <span class="token punctuation">(</span>name<span class="token punctuation">,</span>description<span class="token punctuation">)</span> <span class="token keyword keyword-VALUES">VALUES</span> <span class="token punctuation">(</span>
    <span class="token string">"sneakers"</span><span class="token punctuation">,</span>
    <span class="token string">"Chaussures unisexe pour la vie quotidien."</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><blockquote>
<p>La colonne <code>id</code> est <code>AUTO_INCREMENT</code>, c'est MySQL qui défini sa valeur il ne faut donc pas la fournir à la création.</p>
</blockquote>
<h2 id="select--from">SELECT ... FROM </h2>
<p>Selectionner certaine colonnes d'une table.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> name<span class="token punctuation">,</span>description <span class="token keyword keyword-FROM">FROM</span> category<span class="token punctuation">;</span>
</code></pre><p>Selectionner toutes les colonnes.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token operator">*</span> <span class="token keyword keyword-FROM">FROM</span> category<span class="token punctuation">;</span>
</code></pre><blockquote>
<p>Notez bien que l'on parle de <em>selection</em> et pas d'<em>affichage</em>, SQL n'à pas vocation à afficher quoi que soit. Au final les données seront envoyées dans un <code>Array</code> PHP, JavaScript ou autre puis éventuellement affichées dans le front-end.</p>
</blockquote>
<h2 id="filtrer-la-selection-avec-les-conditions">Filtrer la selection avec les conditions </h2>
<h3 id="where">WHERE </h3>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token comment"># Test egalité</span>
<span class="token keyword keyword-SELECT">SELECT</span> <span class="token operator">*</span> <span class="token keyword keyword-FROM">FROM</span> category <span class="token keyword keyword-WHERE">WHERE</span> name <span class="token operator">=</span> <span class="token string">"sneakers"</span><span class="token punctuation">;</span> 
<span class="token keyword keyword-SELECT">SELECT</span> <span class="token operator">*</span> <span class="token keyword keyword-FROM">FROM</span> category <span class="token keyword keyword-WHERE">WHERE</span> id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

<span class="token comment"># ET Logique</span>
<span class="token keyword keyword-SELECT">SELECT</span> <span class="token operator">*</span> <span class="token keyword keyword-FROM">FROM</span> product <span class="token keyword keyword-WHERE">WHERE</span> price <span class="token operator">&gt;</span> <span class="token number">10</span> <span class="token operator">AND</span> price <span class="token operator">&lt;</span> <span class="token number">50</span><span class="token punctuation">;</span>

<span class="token comment"># Test selon un pattern</span>
<span class="token keyword keyword-SELECT">SELECT</span> <span class="token operator">*</span> <span class="token keyword keyword-FROM">FROM</span> category <span class="token keyword keyword-WHERE">WHERE</span> name <span class="token operator">LIKE</span> <span class="token string">"s%"</span><span class="token punctuation">;</span> <span class="token comment"># name commence par 's'</span>
<span class="token keyword keyword-SELECT">SELECT</span> <span class="token operator">*</span> <span class="token keyword keyword-FROM">FROM</span> category <span class="token keyword keyword-WHERE">WHERE</span> name <span class="token operator">LIKE</span> <span class="token string">"%s"</span><span class="token punctuation">;</span> <span class="token comment"># name fini par 's'</span>
<span class="token keyword keyword-SELECT">SELECT</span> <span class="token operator">*</span> <span class="token keyword keyword-FROM">FROM</span> category <span class="token keyword keyword-WHERE">WHERE</span> description <span class="token operator">LIKE</span> <span class="token string">"%vie%"</span><span class="token punctuation">;</span> <span class="token comment"># name contient 'vie'</span>
</code></pre><p>On peut imaginer utiliser <code>LIKE</code> pour la requête d'une barre de recherche par exemple, plus d'info ici : <a href="https://www.w3schools.com/mysql/mysql_like.asp">https://www.w3schools.com/mysql/mysql_like.asp</a>.</p>
<h3 id="order-by">ORDER BY </h3>
<p>Toutes les catégories dans l'ordre alphabétique</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token operator">*</span> <span class="token keyword keyword-FROM">FROM</span> category <span class="token keyword keyword-ORDER">ORDER</span> <span class="token keyword keyword-BY">BY</span> name<span class="token punctuation">;</span> 
</code></pre><p>Toutes les catégories dans l'ordre anti-alphabétique</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token operator">*</span> <span class="token keyword keyword-FROM">FROM</span> category <span class="token keyword keyword-ORDER">ORDER</span> <span class="token keyword keyword-BY">BY</span> name <span class="token keyword keyword-DESC">DESC</span><span class="token punctuation">;</span> 
</code></pre><h3 id="limit">LIMIT </h3>
<p>Selectionne les 10 premières lignes.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token operator">*</span> <span class="token keyword keyword-FROM">FROM</span> category <span class="token keyword keyword-LIMIT">LIMIT</span> <span class="token number">10</span><span class="token punctuation">;</span>
</code></pre><h2 id="delete">DELETE </h2>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-DELETE">DELETE</span> <span class="token keyword keyword-FROM">FROM</span> category <span class="token keyword keyword-WHERE">WHERE</span> id <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
</code></pre><h2 id="update">UPDATE </h2>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-UPDATE">UPDATE</span> category <span class="token keyword keyword-SET">SET</span> name<span class="token operator">=</span><span class="token string">"Chaussure sneakers"</span> <span class="token keyword keyword-WHERE">WHERE</span> name<span class="token operator">=</span><span class="token string">"sneakers"</span><span class="token punctuation">;</span>
</code></pre><h2 id="truncate-table-vider-une-table">TRUNCATE TABLE, vider une table </h2>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-TRUNCATE">TRUNCATE</span> <span class="token keyword keyword-TABLE">TABLE</span> category<span class="token punctuation">;</span>
</code></pre><h2 id="drop-table-supprimer-un-table-">DROP TABLE, supprimer un table ! </h2>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-DROP">DROP</span> <span class="token keyword keyword-TABLE">TABLE</span> category<span class="token punctuation">;</span>
</code></pre><blockquote>
<p><strong>ATTENTION !</strong> DROP TABLE supprime completement le contenu et la strucutre de la table ! Il n'en restera rien.</p>
</blockquote>
<h2 id="alter-table-modifier-la-strucutre-dune-table">ALTER TABLE, modifier la strucutre d'une table. </h2>
<p><code>ALTER</code> permet de rajouter, modifier ou supprimer une colonne d'une table.<br>
Voir la doc W3S : <a href="https://www.w3schools.com/mysql/mysql_alter.asp">https://www.w3schools.com/mysql/mysql_alter.asp</a><br>
SYntaxe :</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-ALTER">ALTER</span> <span class="token keyword keyword-TABLE">TABLE</span> table_name ALTER_OPTION <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
</code></pre><h3 id="ajouter-une-colonne">Ajouter une colonne </h3>
<p><strong>Syntaxe :</strong></p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-ALTER">ALTER</span> <span class="token keyword keyword-TABLE">TABLE</span> table_name <span class="token keyword keyword-ADD">ADD</span> column_name datatype<span class="token punctuation">;</span>
</code></pre><p><strong>Exemple :</strong></p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-ALTER">ALTER</span> <span class="token keyword keyword-TABLE">TABLE</span> product <span class="token keyword keyword-ADD">ADD</span> short_description <span class="token keyword keyword-TINYTEXT">TINYTEXT</span><span class="token punctuation">;</span>
</code></pre><h3 id="supprimer-une-colonne">Supprimer une colonne </h3>
<p><strong>Syntaxe :</strong></p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-ALTER">ALTER</span> <span class="token keyword keyword-TABLE">TABLE</span> table_name <span class="token keyword keyword-DROP">DROP</span> column_name<span class="token punctuation">;</span>
</code></pre><p><strong>Exemple :</strong></p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-ALTER">ALTER</span> <span class="token keyword keyword-TABLE">TABLE</span> category <span class="token keyword keyword-DROP">DROP</span> description<span class="token punctuation">;</span>
</code></pre><h3 id="modifier-le-type-dune-colonne">Modifier le type d'une colonne </h3>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-ALTER">ALTER</span> <span class="token keyword keyword-TABLE">TABLE</span> table_name <span class="token keyword keyword-MODIFY">MODIFY</span> <span class="token keyword keyword-COLUMN">COLUMN</span> column_name datatype<span class="token punctuation">;</span>
</code></pre><pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-ALTER">ALTER</span> <span class="token keyword keyword-TABLE">TABLE</span> product <span class="token keyword keyword-MODIFY">MODIFY</span> <span class="token keyword keyword-COLUMN">COLUMN</span> short_description <span class="token keyword keyword-TEXT">TEXT</span><span class="token punctuation">;</span>
</code></pre><h1 id="comprendre-les-bdd-grâce-au-opérations-crud">Comprendre les BDD grâce au opérations CRUD. </h1>
<p>Le <strong>CRUD</strong> (<strong>C</strong>reate, <strong>R</strong>ead, <strong>U</strong>pdate, <strong>D</strong>elete) désigne les quatre catégories d'opérations élementaire pour la persitance des données.</p>
<p>Le CRUD c'est :</p>
<ul>
<li><strong>Create</strong>, <em>créer</em> une table, une base, inserer une ligne dans une table sont des actions de création.</li>
<li><strong>Read</strong>, <em>lire</em> le contenu d'une table, la structure d'une table, récupérer des données sont des actions de lecture.</li>
<li><strong>Update</strong>, <em>mettre à jour</em> le contenu d'une table, changer la structure d'une table, ajouter une nouvelle colonne, change le type de donnée d'une colonne, modifier une ligne de la table. Ce sont des actions de modifications.</li>
<li><strong>Delete</strong>, <em>supprimer</em> une table, une base, une ligne, une colonne. Ce sont des actions de suppression.</li>
</ul>
<p>Lorsque vous convenez la patie persitance des données d'une logiciel vous devez identifier les différentes actions neccessaire sur votre base et dans quelle catégorie CRUD elle se situe pour en déduire votre BDD.</p>
<p>Pour une boutique en ligne on aurait par exemple :</p>
<table>
<thead>
<tr>
<th>Action</th>
<th>Type d'action(CRUD)</th>
<th>Requête SQL</th>
</tr>
</thead>
<tbody>
<tr>
<td>Voir la page produit</td>
<td>Read</td>
<td>SELECT FROM</td>
</tr>
<tr>
<td>Ajouter un produit</td>
<td>Create</td>
<td>INSERT INTO</td>
</tr>
<tr>
<td>Modifier un produit</td>
<td>Update</td>
<td>UPDATE SET</td>
</tr>
<tr>
<td>Changer un produit de catégorie</td>
<td>Update</td>
<td>UPDATE SET</td>
</tr>
<tr>
<td>Supprimer un produit</td>
<td>Delete</td>
<td>DELETE FROM</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Voir une catégorie</td>
<td>Read</td>
<td>SELECT FROM</td>
</tr>
<tr>
<td>Ajouter une categorie</td>
<td>Create</td>
<td>INSERT INTO</td>
</tr>
<tr>
<td>Supprimer une categorie</td>
<td>Delete</td>
<td>DELETE FROM</td>
</tr>
<tr>
<td>Modifier une categorie</td>
<td>Update</td>
<td>UPDATE SET</td>
</tr>
</tbody>
</table>
<blockquote>
<p>Les actions défini dans le tableau plus haut sont défini à partir d'un diagramme de cas d'utilisateur UML.</p>
</blockquote>
<p>Une fois les actions définis on repère les différentes tables principales de notre base de données.<br>
Pour <a href="http://shoe-shop.com">shoe-shop.com</a> les tables <code>category</code> et <code>product</code> auquelles on rajoute les clés primaires et les colonnes spécifique à chaque tables.</p>
<div class="mermaid">erDiagram
category{
    pk_id INT
    name TINYTEXT
    description TEXT
}
product{
    pk_id INT
    name TINYTEXT
    description TEXT
    price FLOAT
}
</div><h1 id="relations-entre-les-tables">Relations entre les tables </h1>
<p>Une fois la structure élementaires des tables défini il faut réflechir au relations entre les tables.</p>
<blockquote>
<p>La structure élementaire d'une table ce sont la colonne clé primaire et les colonnes inérente à l'entité representé par la table (un produit, une catégorie, une voiture).</p>
</blockquote>
<p>Les relations entre les tables SQL sont défini par les liaisons entre les clés primaires et clés étrangères, il existe 3 types de liaisons :</p>
<ul>
<li><strong>One to Many</strong>, Un élement est référencé dans plusieurs élements d'une autre table. Un categorie est referencé dans plusieurs produits de la table product.</li>
<li><strong>One to One</strong>, un élement est référencé dans un seul et unique element d'une autre table. Un utilisateur est référencé dans un seul et unique element de la table panier ou encore un citoyen n'est referencé dans un seul et unique element de la table carte_vitale.</li>
<li><strong>Many to Many</strong>, ce n'est pas une liaison mais un ensemble de deux liaisons. Quand deux table sont lié via une liaison one to many dans les deux sens alors on à une liaison Many to Many.</li>
</ul>
<blockquote>
<p>Dans les cas des liaisons One to Many et One to One les tables sont connectés dans l'autre sens par une liaisons One to One.</p>
</blockquote>
<p>Les relations entre les tables sont théoriques et leurs applications en langage SQL permet de les créer, nous verrons la manière de mettre en place ces liaisons en SQL plus tard.</p>
<h2 id="diagrame-dentitié-relations-des-relations">Diagrame d'entitié relations des relations </h2>
<p>Pour representé les relations entre les tables on utilise un diagramme UML dit d'entité relation (ER).</p>
<blockquote>
<p>Une entité c'est simplement un element de la table.</p>
</blockquote>
<p>Voici à quoi ressemble un diagramme ER.</p>
<div class="mermaid">erDiagram
    category ||--o{ product : contient
    category {
        column TYPE
    }
    product {
        column TYPE
    }
</div><p>Les deux table sont relié par une ligne qui défini la relation de la table category envers la table product et de la table product envers la table category.<br>
Le mot du centre est un verbe que l'on place pour préseide le lien qui est fait entre ces deux tables.</p>
<p>On lit  : <strong>" One category contient <code>Zero</code> or <code>Many</code> product"</strong>.<br>
On lit aussi : <strong>"One product contient <code>One</code> category"</strong>.</p>
<blockquote>
<p>La lecture commence toujours par "One ..."</p>
</blockquote>
<h3 id="les-symboles">Les symboles </h3>
<table>
<thead>
<tr>
<th>Value</th>
<th>Image</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>One</code></td>
<td><img src="image.png" alt="Alt text"></td>
</tr>
<tr>
<td><code>Many</code></td>
<td><img src="image-1.png" alt="Alt text"></td>
</tr>
<tr>
<td><code>Zero</code></td>
<td><img src="image-2.png" alt="Alt text"></td>
</tr>
<tr>
<td><code>One ou Zero</code></td>
<td><img src="image-8.png" alt="Alt text"></td>
</tr>
<tr>
<td><code>Zero ou Many</code></td>
<td><img src="image-6.png" alt="Alt text"></td>
</tr>
<tr>
<td><code>One ou Many</code></td>
<td><img src="image-9.png" alt="Alt text"></td>
</tr>
</tbody>
</table>
<blockquote>
<h4 id="attention-"><strong>Attention !</strong> </h4>
<p>Ne confondez pas le symbole <code>One</code> avec le début de phrase One. Le premier One est toujours là et ne viens pas d'un symbole.</p>
<div class="mermaid">erDiagram
   category ||--o{ product : contient
   category {
       column TYPE
   }
   product {
       column TYPE
   }
</div><p>Dans ce schéma je dis : One product contient One category même si le symbole collé à la table product est <code>Zero ou Many</code>, c'est une erreur courante dans la lecture de diagramme mais la phrase commence toujours par One ... peut importe le symbole après la table.<br>
<strong>Imaginez les liaisons comme des harpons le symbole qui compte est au bout du harpon pas au début !</strong></p>
</blockquote>
<h3 id="one-to-many">One to Many </h3>
<p>La clé étrangère sur la table ciblé par le symbole<code>Many</code>, ici la table product.</p>
<div class="mermaid">erDiagram
    category||--o{product : contient
    category{
        pk_id INT
        column type
    }
    product{
        pk_id INT
        fk_category INT
    }
</div><h4 id="implémentation">Implémentation </h4>
<p>Soit la table category :</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword keyword-describe">describe</span> category<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-------------+----------+------+-----+---------+----------------+</span>
<span class="token operator">|</span> Field       <span class="token operator">|</span> <span class="token keyword keyword-Type">Type</span>     <span class="token operator">|</span> <span class="token boolean">Null</span> <span class="token operator">|</span> <span class="token keyword keyword-Key">Key</span> <span class="token operator">|</span> <span class="token keyword keyword-Default">Default</span> <span class="token operator">|</span> Extra          <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------------+----------+------+-----+---------+----------------+</span>
<span class="token operator">|</span> id          <span class="token operator">|</span> <span class="token keyword keyword-int">int</span>      <span class="token operator">|</span> <span class="token keyword keyword-NO">NO</span>   <span class="token operator">|</span> PRI <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span> <span class="token keyword keyword-auto_increment">auto_increment</span> <span class="token operator">|</span>
<span class="token operator">|</span> name        <span class="token operator">|</span> <span class="token keyword keyword-tinytext">tinytext</span> <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>                <span class="token operator">|</span>
<span class="token operator">|</span> description <span class="token operator">|</span> <span class="token keyword keyword-text">text</span>     <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>                <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------------+----------+------+-----+---------+----------------+</span>
<span class="token number">3</span> <span class="token keyword keyword-rows">rows</span> <span class="token operator">in</span> <span class="token keyword keyword-set">set</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">00</span> sec<span class="token punctuation">)</span>
</code></pre><p>A la création de la table product il vous faut définir un colonne comme étant une clé étrangère de la table categorie.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-CREATE">CREATE</span> <span class="token keyword keyword-TABLE">TABLE</span> product<span class="token punctuation">(</span>
    id <span class="token keyword keyword-INT">INT</span> <span class="token keyword keyword-PRIMARY">PRIMARY</span> <span class="token keyword keyword-KEY">KEY</span> <span class="token keyword keyword-AUTO_INCREMENT">AUTO_INCREMENT</span><span class="token punctuation">,</span>
    name <span class="token keyword keyword-TEXT">TEXT</span><span class="token punctuation">,</span>
    price <span class="token keyword keyword-FLOAT">FLOAT</span><span class="token punctuation">,</span>
    fk_category <span class="token keyword keyword-INT">INT</span><span class="token punctuation">,</span>
    <span class="token keyword keyword-FOREIGN">FOREIGN</span> <span class="token keyword keyword-KEY">KEY</span> <span class="token punctuation">(</span>fk_category<span class="token punctuation">)</span> <span class="token keyword keyword-REFERENCES">REFERENCES</span> category<span class="token punctuation">(</span>id<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h3 id="one-to-one">One to One </h3>
<p>La clé étrangère soit être sur la table ciblé par <code>One</code> et elle doit être <code>UNIQUE</code>, la clé primaire est déjà par défaut unique.</p>
<div class="mermaid">erDiagram
    user||--||cart : has
    user{
        pk_id INT
        name TINYTEXT
    }
    cart{
        pk_id INT
        products JSON
        fk_user INT
    }
</div><h4 id="implémentation-1">Implémentation </h4>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-CREATE">CREATE</span> <span class="token keyword keyword-TABLE">TABLE</span> <span class="token keyword keyword-user">user</span><span class="token punctuation">(</span>
    pk_id <span class="token keyword keyword-INT">INT</span> <span class="token keyword keyword-PRIMARY">PRIMARY</span> <span class="token keyword keyword-KEY">KEY</span> <span class="token keyword keyword-AUTO_INCREMENT">AUTO_INCREMENT</span><span class="token punctuation">,</span>
    name <span class="token keyword keyword-TINYTEXT">TINYTEXT</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword keyword-CREATE">CREATE</span> <span class="token keyword keyword-TABLE">TABLE</span> cart<span class="token punctuation">(</span>
    pk_id  <span class="token keyword keyword-INT">INT</span> <span class="token keyword keyword-PRIMARY">PRIMARY</span> <span class="token keyword keyword-KEY">KEY</span> <span class="token keyword keyword-AUTO_INCREMENT">AUTO_INCREMENT</span><span class="token punctuation">,</span>
    products JSON<span class="token punctuation">,</span>
    fk_user <span class="token keyword keyword-INT">INT</span> <span class="token keyword keyword-UNIQUE">UNIQUE</span><span class="token punctuation">,</span>
    <span class="token keyword keyword-FOREIGN">FOREIGN</span> <span class="token keyword keyword-KEY">KEY</span> <span class="token punctuation">(</span>fk_user<span class="token punctuation">)</span> <span class="token keyword keyword-REFERENCES">REFERENCES</span> <span class="token keyword keyword-user">user</span><span class="token punctuation">(</span>pk_id<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>Chaque element de la colonne cart.fk_user doit etre <code>UNIQUE</code> donc il ne pourra jamais avoir deux paniers qui réferences le même utilisateur. 😉</p>
<h3 id="many-to-many">Many to Many </h3>
<p>Pour effectuer une relation Many to Many, une troisème table doit être créer elle contient : une primary key, la clé étrangère de la table A et la clé étrangère de la table B.</p>
<p>Imaginons qu'un produit ai plusieurs categories.</p>
<div class="mermaid">erDiagram
    category}|--o{product : has
    category{
        pk_id INT
        column type
    }
    product{
        pk_id INT
        fk_category INT
        column type
    }
</div><blockquote>
<p>Rappel en SQL peut importe que le cardinal soit [0...N] ou [1...N] c'est un liaison <code>Many</code>.</p>
</blockquote>
<p>Comment faire car un clé étrangère ne peut contenir qu'une seul clé primaire et mon produit doit maintenant en contenir plusieurs.<br>
Il nous faut une troisème table.</p>
<h4 id="la-table-de-jointure">La table de jointure. </h4>
<p>Une table de jointure est une table qui ne represente pas une entité réel concrete de notre application mais sert simplement à mettre en place la liaison Many to Many, voyez cela comme une table "utilitaire".</p>
<p>Une table de jointure doit contenir le moins de chose possible elle n'a pas vocation à faire plus que joindre deux table.<br>
Elle possède comme colonnes minimales :</p>
<ul>
<li>Une clé primaire, comme toute table SQL.</li>
<li>Une clé etrangère de la table A</li>
<li>une clé étrange de la table B.</li>
</ul>
<blockquote>
<p>Par convention les tables de jointure on pour nom le nom des deux tables concaténés en CamelCase.</p>
</blockquote>
<p>Pour les tables category et product :</p>
<div class="mermaid">erDiagram
    product||--o{CategoryProduct : join
    category||--o{CategoryProduct : join
    category{
        pk_id INT
        column type
    }
    product{
        pk_id INT
        column type
    }
    CategoryProduct{
        pk_id INT
        fk_category INT
        fk_product INT
    }
</div><h4 id="implémentation-many-to-many">Implémentation Many to Many </h4>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-CREATE">CREATE</span> <span class="token keyword keyword-TABLE">TABLE</span> category<span class="token punctuation">(</span>
    pk_id <span class="token keyword keyword-INT">INT</span> <span class="token keyword keyword-PRIMARY">PRIMARY</span> <span class="token keyword keyword-KEY">KEY</span> <span class="token keyword keyword-AUTO_INCREMENT">AUTO_INCREMENT</span><span class="token punctuation">,</span>
    name <span class="token keyword keyword-TINYTEXT">TINYTEXT</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword keyword-CREATE">CREATE</span> <span class="token keyword keyword-TABLE">TABLE</span> product<span class="token punctuation">(</span>
    pk_id  <span class="token keyword keyword-INT">INT</span> <span class="token keyword keyword-PRIMARY">PRIMARY</span> <span class="token keyword keyword-KEY">KEY</span> <span class="token keyword keyword-AUTO_INCREMENT">AUTO_INCREMENT</span><span class="token punctuation">,</span>
    name <span class="token keyword keyword-TINYTEXT">TINYTEXT</span><span class="token punctuation">,</span>
    price <span class="token keyword keyword-FLOAT">FLOAT</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword keyword-CREATE">CREATE</span> <span class="token keyword keyword-TABLE">TABLE</span> CategoryProduct<span class="token punctuation">(</span>
    pk_id  <span class="token keyword keyword-INT">INT</span> <span class="token keyword keyword-PRIMARY">PRIMARY</span> <span class="token keyword keyword-KEY">KEY</span> <span class="token keyword keyword-AUTO_INCREMENT">AUTO_INCREMENT</span><span class="token punctuation">,</span>
    fk_category <span class="token keyword keyword-INT">INT</span><span class="token punctuation">,</span>
    fk_product <span class="token keyword keyword-INT">INT</span><span class="token punctuation">,</span>
    <span class="token keyword keyword-FOREIGN">FOREIGN</span> <span class="token keyword keyword-KEY">KEY</span> <span class="token punctuation">(</span>fk_category<span class="token punctuation">)</span> <span class="token keyword keyword-REFERENCES">REFERENCES</span> category<span class="token punctuation">(</span>pk_id<span class="token punctuation">)</span>
    <span class="token keyword keyword-FOREIGN">FOREIGN</span> <span class="token keyword keyword-KEY">KEY</span> <span class="token punctuation">(</span>fk_product<span class="token punctuation">)</span> <span class="token keyword keyword-REFERENCES">REFERENCES</span> product<span class="token punctuation">(</span>pk_id<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h4 id="ajouter-un-produit-à-une-catégorie">Ajouter un produit à une catégorie </h4>
<p>Pour rajouter un produit à une catégorie il suffit d'inserer une nouvelle entrée dans la table CategoryProduct avec l'id du produit concerné et de la categorie dont il fait maintenant partie avec <code>INSERT INTO</code>.</p>
<h2 id="la-cardinalité">La cardinalité </h2>
<p>La cardinalité c'est le nombres de liens possibles d'une table à une autre. Elle permet de choisi entre les choisirs quelque symbole utiliser dans notre diagramme d'entité relation.</p>
<p>Définir la cardinalité de deux tables ce fait en deux étapes :</p>
<ol>
<li>Connaitre la cardinalité de la table A vers la table B :
<ul>
<li>Combien de lien un element de A peut avoir au maximum vers une element de B ?</li>
<li>Combien de lien un element de A peut avoir au minimum vers une un element de B ?</li>
<li>Quelle liaison cela donne t-il : One to One ou One to Many ?</li>
</ul>
</li>
<li>Dans l'autre sens il faut maintant connaitre la cardinalité de la table B vers la table A :
<ul>
<li>Combien de lien un element de B peut avoir au maximum vers une element de A ?</li>
<li>Combien de lien un element de B peut avoir au minimum vers une un element de A ?</li>
<li>Quelle liaison cela donne t-il : One to One ou One to Many ?</li>
</ul>
</li>
<li>La liaison qui contien Many est la liaison qui défini la relation entre les table.
<ul>
<li>Si il y a deux One to One alors la relation est One to One.</li>
<li>Si il y a un et uniquement un One to Many alors la relation est One to Many.</li>
<li>Si il y a deux One to Many alors la relation est Many to Many.</li>
</ul>
</li>
</ol>
<p><strong>Exemple :</strong><br>
Voici les tables <code>product</code> et <code>category</code> où chaque produit ne peut avoir qu'une seule catégorie et chaque catégorie peut etre lié à une infinité de produit.</p>
<div class="mermaid">flowchart LR
subgraph Product
    produit1["Nike taille 42"]
    produit2["Adidas taille 45"]
    produit3["Clarks taille 37"]

end
subgraph Category
    categorie1["Bottes"]
    categorie2["Sneakers"]
    categorie3["Chaussures à talon"]
end
produit1---categorie2
produit2---categorie2
produit3---categorie3
</div><ol>
<li>
<p>Connaitre la cardinalité de la table <code>produit</code> vers la table <code>categorie</code> :</p>
<ul>
<li>Combien de lien un produit peut avoir au maximum vers une categorie ?<br>
<strong>Réponse : 1.</strong></li>
<li>Combien de lien un produit peut avoir au minimum vers une categorie ?<br>
<strong>Réponse : 1.</strong></li>
<li>Quelle liaison cela donne t-il : One to One ou One to Many ?<br>
<strong>Réponse : One to <code>One</code> car on a un produit pour une categorie.</strong></li>
</ul>
</li>
<li>
<p>Dans l'autre sens il faut maintant connaitre la cardinalité de la categorie vers la produit :</p>
<ul>
<li>Combien de lien une categorie peut avoir au maximum vers un produit ?<br>
<strong>Réponse : N (une nombre entier positif infini)</strong></li>
<li>Combien de lien une categorie peut avoir au minimum vers un produit ?<br>
<strong>Réponse : 0</strong></li>
<li>Quelle liaison cela donne t-il : One to One ou One to Many ?<br>
<strong>Réponse : One to <code>Many</code></strong> car il peut y avoir entre O et N produits donc plusieurs (many) produits.</li>
</ul>
</li>
<li>
<p><strong>La relation de <code>product</code> vers <code>category</code> est donc One to Many</strong>.</p>
</li>
</ol>
<div class="mermaid">erDiagram
    category ||--o{ product : contient
    category {
        pk_id INT
        name TINYTEXT
        description TEXT
    }
    product {
        pk_id INT
        name TINYTEXT
        description TEXT
        price FLOAT
        fk_category INT
    }
</div><blockquote>
<ul>
<li>un barre vertical <strong>|</strong> signifie <code>one</code>,</li>
<li>un cercle <strong>O</strong> signifie <code>zéro</code>,</li>
<li>la fourche <strong>{</strong> <code>Many</code> ou <code>N</code></li>
<li>deux barre vérticale <strong>||</strong> signifie exclusivement <code>one</code>.</li>
</ul>
</blockquote>
<h1 id="transcation-sql">Transcation SQL </h1>
<p>En SQL par défaut toute requête envoyé est irréversible, il est possible de changer sa avec les commande <code>START TRANSACTION</code>, <code>COMMIT</code>, <code>ROLLBACK</code>.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword keyword-START">START</span> <span class="token keyword keyword-TRANSACTION">TRANSACTION</span><span class="token punctuation">;</span> <span class="token comment"># Toutes les requêtes après START sont temporaires.</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword keyword-ROLLBACK">ROLLBACK</span><span class="token punctuation">;</span> <span class="token comment"># Toutes les requêtes faites depuis START sont annulées.</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword keyword-COMMIT">COMMIT</span><span class="token punctuation">;</span> <span class="token comment"># Applique définitivement les requêtes faites depuis le START.</span>
</code></pre><h2 id="idée-tp">Idée TP </h2>
<ul>
<li>Exercices à partir d'une BDD à importer</li>
<li>TP Shoe_shoes : Diagramme de cas d'utilisation fournis (travail de groupe de 3 avec rendu de projet séparés)
<ul>
<li>CRUD</li>
<li>définir les tables</li>
<li>définir les relation entre les tables</li>
<li>Créer la base et la tester</li>
<li>OBJECTIF - Application PHP  MVC</li>
<li>OBJECTIF - Application PHP  API REST</li>
</ul>
</li>
<li>TP Pokedex : Diagramme de cas d'utilisation à faire à partir d'un entretien (travail de groupe de 3 avec rendu de projet séparés)
<ul>
<li>CRUD</li>
<li>définir les tables</li>
<li>définir les realtions entre les tables</li>
<li>Créer la base et la tester</li>
<li>OBJECTIF - Application PHP  MVC</li>
<li>OBJECTIF - Application PHP  API REST</li>
</ul>
</li>
</ul>

      </div>
      
      
    
    
    <script type="module">
// TODO: If ZenUML gets integrated into mermaid in the future,
//      we can remove the following lines.


var MERMAID_CONFIG = ({"startOnLoad":false});
if (typeof MERMAID_CONFIG !== 'undefined') {
  MERMAID_CONFIG.startOnLoad = false
  MERMAID_CONFIG.cloneCssStyles = false
  MERMAID_CONFIG.theme = "default"
}

mermaid.initialize(MERMAID_CONFIG || {})
if (typeof(window['Reveal']) !== 'undefined') {
  function mermaidRevealHelper(event) {
    var currentSlide = event.currentSlide
    var diagrams = currentSlide.querySelectorAll('.mermaid')
    for (var i = 0; i < diagrams.length; i++) {
      var diagram = diagrams[i]
      if (!diagram.hasAttribute('data-processed')) {
        mermaid.init(null, diagram, ()=> {
          Reveal.slide(event.indexh, event.indexv)
        })
      }
    }
  }
  Reveal.addEventListener('slidetransitionend', mermaidRevealHelper)
  Reveal.addEventListener('ready', mermaidRevealHelper)
  await mermaid.run({
    nodes: document.querySelectorAll('.mermaid')
  })
} else {
  await mermaid.run({
    nodes: document.querySelectorAll('.mermaid')
  })
}
</script>
    
    
    
  
    </body></html>